
@using SwarajCustomer_Common;
@{
    ViewBag.Title = "My Booking";
    ViewBag.Menu = "Dashboard";
    ViewBag.SubMenu = "Index";
    Layout = "~/Views/Shared/_CustomerLayout.cshtml";
    var Server_Url = CommonMethods.BaseUrl;

}



<div class="col-sm-9 rightbox">
    <div class="fullwidth top">
        <div class="table-heading padding">
            <div class="col-md-8" style="padding-left:0;">
                <h1 class="col-sm-12 headingbox" style="position: relative; top: 0; padding-left: 0;">@ViewBag.Title</h1>
            </div>
        </div>
    </div>
    <div class="barwidths borderwidthss" id="adminDashboardLeads">
        <div class="searchfilter">
            <div class="col-sm-12 searchbox tab">
                <button class="tablinks" id="AUpcoming" onclick="myBooking(event, 'Upcoming')">Upcoming</button>
                <button class="tablinks" onclick="myBooking(event, 'Completed')">Completed</button>
                <button class="tablinks" onclick="myBooking(event, 'Cancelled')">Cancelled</button>
            </div>
        </div>
        <div class="table-container" id="divGrid">
        </div>
        <div class="table-container" id="divNoData">
        </div>

    </div>

    <!-- Add Ression -->
    <div id="logoutModal1" class="modal" role="dialog" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog">

            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Ression</h4>
                    <button type="button" id="closechassismodel" class="close" data-dismiss="modal" data-name="" onclick="ClearFields()"><img src="~/Content/images/croxxicon.png"></button>
                </div>
                <input type="hidden" id="hddbooking_id" />
                <input type="hidden" id="hddorder_number" />

                <div class="modal-body">
                    <span class="validation" id="spnmobile_numeber"></span>
                    <div class="centerdiv">
                        <div class="col-sm-12 searchbox">

                            <textarea id="txtRession" name="Ression" rows="4" cols="50" class="form-control selectoption" style="resize: none" placeholder="Enter Message">
                        </textarea>
                            <span style="color:red" class="validation" id="spnRession"></span>
                        </div>
                    </div>
                    <div class="buttonsenterbox margintops">
                        <button class="btn btn-success yes" id="btn_save" onclick="_CancelBooking()">Submit</button>
                        <button class="btn btn-danger No" data-dismiss="modal" id="btnlogoutno" onclick="ClearFields()">Cancel</button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Add Reminder -->
    <div id="logoutModal2" class="modal reminderpopups" role="dialog" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog reminderpop">

            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Add Reminder</h4>
                    <button type="button" id="closechassismodel" class="close" data-dismiss="modal" data-name="" onclick="_cancelReminder()"><img src="~/Content/images/croxxicon.png"></button>
                </div>
                <input type="hidden" id="hddBookingID" />
                <input type="hidden" id="hddOrderNumber" />

                <div class="modal-body">
                    <div class="centerdiv">
                        <div class="col-sm-12 searchbox">
                            <label>Date of Reminder</label>
                            <input type="text" class="form-control date-picker-textbox hasDatepicker" id="startdate_id" placeholder="startdate" readonly />
                            <img src="~/Content/images//caleder.png" style="height:15px;width:15px">
                        </div>

                        <div class="col-sm-12 searchbox">
                            <label>Time of Reminder</label>
                            <input type="text" class="form-control date-picker-textbox hasDatepicker" id="DateOfTime" placeholder="startdate" readonly />
                            <img src="~/Content/images//caleder.png" style="height:15px;width:15px">
                            <span style="color:red" class="validation" id="spnDateOfTime"></span>
                        </div>

                        <br />
                        <div class="col-sm-12 searchbox">
                            <label>Email Address</label>
                            <input type="text" class="form-control" id="txtEmailAddress" />
                            <span style="color:red" class="validation" id="spnEmailAddress"></span>
                        </div>
                        <div class="col-sm-12 searchbox">
                            <span id="spnPujaName" style="font-weight: bold"></span><br />
                            <span id="spnPujaAddress"></span>
                        </div>

                    </div>
                    <div class="buttonsenterbox margintops">
                        <button class="btn btn-success yes" id="btn_save" onclick="SaveReminder()">Submit</button>
                        <button class="btn btn-danger No" data-dismiss="modal" id="btnlogoutno" onclick="_cancelReminder()">Cancel</button>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<script src="~/Scripts/function.js"></script>
<script src="~/Areas/Customer/Scripts/mybooking.js"></script>



<script>
    AlphaNumericOnly('.alphaNumericOnly');
    NumberOnly('.numberOnly');
    DecimalOnly('.decimalOnly');


    var $_GetMyBookingsUrl = '@Url.Action("GetMyBookings", "MyBooking", new { Area = "Customer" })';
    var $_SaveReminderUrl = '@Url.Action("SaveReminder", "MyBooking", new { Area = "Customer" })';
    var $_BookingCancelUrl = "";
    debugger;
    if ('@Server_Url'.indexOf('AgriGuru') >= 1) {
        $_BookingCancelUrl = '/AgriGuru/Booking/BookingCancel/';
    }
    else if ('@Server_Url'.indexOf('PujaGuru') >= 1) {
        $_BookingCancelUrl = '/PujaGuru/Booking/BookingCancel/';
    }
    else {
        $_BookingCancelUrl = '/Booking/BookingCancel/';
    }


    $(document).ready(function () {
        GetMyBookings();

        var d = new Date();
        var currMonth = d.getMonth();
        var currYear = d.getFullYear();
        var currDate = d.getDate();
        var endDate = new Date(currYear, currMonth, currDate + 1);

        debugger;
        $("#startdate_id").datetimepicker({
            format: "DD-MM-YYYY",
            pickTime: true,
            autoclose: true,
            defaultDate: endDate,
            minDate: endDate,
            ampm: true, // FOR AM/PM FORMAT
        });

        $("#DateOfTime").datetimepicker({
            format: "hh:mm A",
            pickTime: true,
            autoclose: true,
            ampm: true, // FOR AM/PM FORMAT
            pickDate: false,
            minuteStep: 15,
            pickerPosition: 'bottom-right',
            showMeridian: true,
            startView: 1,
            maxView: 1,
            defaultDate: endDate
        });
    });
</script>

<style>

    .tab button:last-child {
        border: none;
    }
    /* Style the tab */
    .tab {
        overflow: hidden;
        border: 1px solid #333;
        background-color: #333;
        padding-left: 0;
        padding-right: 0;
    }

        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 6px 16px;
            transition: 0.3s;
            font-size: 17px;
            color: #fff;
            border-right: 1px solid #fff;
        }

            /* Change background color of buttons on hover */
            .tab button:hover {
                background-color: #f15a29;
            }

            /* Create an active/current tablink class */
            .tab button.active {
                background-color: #f15a29;
            }

    /* Style the tab content */
    .tabcontent {
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
        float: left;
        margin-top: -11px;
        width: 100%;
    }

    .modal-dialog.reminderpop .modal-body img {
        position: absolute;
        right: 0;
        top: 24px;
        right: 24px;
    }

    .fullwidths.booking p {
        width: auto;
        display: inline-block;
    }

    .fullwidths.booking span {
        font-weight: bold;
        /* font-size: 16px; */
    }

    .fullwidths.booking {
        font-size: 14px;
        line-height: 34px;
    }
</style>



